(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6686],{2395:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var l=a(5155),t=a(2115),i=a(5695),n=a(3604),r=a(7733),c=a(7168),d=a(9852),u=a(5784),o=a(402),h=a(3580),m=a(1677),x=a(8482),p=a(492);function j(){let{t:e,language:s}=(0,r.o)(),a=(0,i.useRouter)(),j=(0,i.useParams)(),{toast:v}=(0,h.dj)(),{articles:g,updateArticle:y}=(0,m.P)(),[N,b]=(0,t.useState)(!1),[f,w]=(0,t.useState)({language:"ru",poster:null,additionalImages:[],author:"",newsType:"",category:"",title:"",content:"",tags:[],publishDate:"",audio:null});(0,t.useEffect)(()=>{let e=j.id,s=null;for(let a of["uz-cyrl","ru","uz"]){var l;let t=null===(l=g[a])||void 0===l?void 0:l.find(s=>s.id===e);if(t){s=t;break}}s?w({...f,language:s.language,author:s.author,newsType:s.category,category:s.category,title:s.title,content:s.content||""}):(v({title:"Error",description:"News not found",variant:"destructive"}),a.push("/dashboard/articles"))},[j.id,g,a,v]);let C=async e=>{if(e.preventDefault(),!f.title||!f.newsType){v({title:"Error",description:"Title and news type are required",variant:"destructive"});return}b(!0);let s=j.id;try{y(s,f.language,{title:f.title,category:f.newsType,author:f.author,content:f.content,language:f.language}),v({title:"Success",description:"News has been updated successfully"}),a.push("/dashboard/articles")}catch(e){v({title:"Error",description:"Failed to update news",variant:"destructive"})}finally{b(!1)}},k=(e,s)=>{var a;let l=null===(a=e.target.files)||void 0===a?void 0:a[0];l&&w({...f,[s]:l})};return(0,l.jsx)(n.N,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"mb-6 text-2xl font-bold",children:e("editArticle")}),(0,l.jsxs)(x.Zp,{children:[(0,l.jsx)(x.aR,{className:"filter-section-dark",children:(0,l.jsx)(x.ZB,{className:"text-white",children:e("editArticle")})}),(0,l.jsx)(x.Wu,{className:"p-6",children:(0,l.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:e("language")}),(0,l.jsxs)(u.l6,{value:f.language,onValueChange:e=>w({...f,language:e}),children:[(0,l.jsx)(u.bq,{children:(0,l.jsx)(u.yv,{placeholder:e("selectLanguage")})}),(0,l.jsxs)(u.gC,{children:[(0,l.jsx)(u.eb,{value:"ru",children:"Русский язык"}),(0,l.jsx)(u.eb,{value:"uz",children:"O'zbek tili"}),(0,l.jsx)(u.eb,{value:"uz-cyrl",children:"Ўзбекча (Кирилл)"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:e("title")}),(0,l.jsx)(d.p,{value:f.title,onChange:e=>w({...f,title:e.target.value}),placeholder:e("title"),required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:e("poster")}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(d.p,{type:"file",accept:"image/*",onChange:e=>k(e,"poster"),className:"hidden",id:"poster"}),(0,l.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("poster"))||void 0===e?void 0:e.click()},children:[(0,l.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e("uploadPoster")]}),f.poster&&(0,l.jsx)("span",{className:"text-sm",children:f.poster.name})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:e("newsType")}),(0,l.jsxs)(u.l6,{value:f.newsType,onValueChange:e=>w({...f,newsType:e}),required:!0,children:[(0,l.jsx)(u.bq,{children:(0,l.jsx)(u.yv,{placeholder:e("selectNewsType")})}),(0,l.jsxs)(u.gC,{children:[(0,l.jsx)(u.eb,{value:"Янгиликлар",children:"Янгиликлар"}),(0,l.jsx)(u.eb,{value:"Эълонлар",children:"Эълонлар"}),(0,l.jsx)(u.eb,{value:"Баннер",children:"Баннер"}),(0,l.jsx)(u.eb,{value:"Биз ҳақимизда",children:"Биз ҳақимизда"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:e("content")}),(0,l.jsx)(o.d,{value:f.content,onChange:e=>w({...f,content:e}),placeholder:e("content")})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:e("audio")}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(d.p,{type:"file",accept:"audio/*",onChange:e=>k(e,"audio"),className:"hidden",id:"audio"}),(0,l.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("audio"))||void 0===e?void 0:e.click()},children:[(0,l.jsx)(p.A,{className:"mr-2 h-4 w-4"}),e("uploadAudio")]}),f.audio&&(0,l.jsx)("span",{className:"text-sm",children:f.audio.name})]})]}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(c.$,{type:"submit",className:"button-primary",disabled:N,children:e(N?"saving":"save")})})]})})]})]})})}},7038:(e,s,a)=>{Promise.resolve().then(a.bind(a,2395))}},e=>{var s=s=>e(e.s=s);e.O(0,[8633,3482,3963,2355,3193,5427,9809,1677,3813,8441,1684,7358],()=>s(7038)),_N_E=e.O()}]);